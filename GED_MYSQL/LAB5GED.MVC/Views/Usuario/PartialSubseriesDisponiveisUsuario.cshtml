@model List<LAB5GED.DOMAIN.Entidades.Subserie>


@{
    LAB5GED.DOMAIN.Entidades.Usuario _usuario = null;
    try{

        _usuario = new LAB5GED.DOMAIN.DAO.Business.UsuarioBO().GetByRegistro(int.Parse(ViewBag.usuario));

    }
    catch { }
   
}
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<script type="text/javascript">

    function addItem() {
        $("#disponiveis option:selected").appendTo("#vinculadas");
       

        var data = JSON.stringify({
            '_registroUsuario': 1,
            '_registroSubseries': $("#disponiveis option:selected"),
            '_adiciona': true
        });
        $.ajax({
            type: 'POST',
            url: '@Url.Action("ConfigurarSubseries","Usuario")', // we are calling json method

        

            data: data,
            erro: function (ex) {
                alert(ex);
            }
            // here we are get value of selected country and passing same value


            //success: function (states) {

            //    // states contains the JSON formatted list
            //    // of states passed from the controller

            //    $.each(states, function (i, state) {
            //        $("#Caixa").append('<option value="' + state.Value + '">' +
            //             state.Text + '</option>');
            //        // here we are adding option for States

            //    });
            //},
            //error: function (ex) {
            //    alert('Failed to retrieve states.' + ex);
            //}
        });

        $("#vinculadas option").attr("selected", false);
    }

    function remItem() {
        $("#vinculadas option:selected").appendTo("#disponiveis");
        $("#disponiveis option").attr("selected", false);
    }

</script>

<div class="row">
    <div class="col-lg-6">
        <div class="panel panel-warning">
            <div class="panel-heading">
                <h3 class="panel-title">Subséries disponíveis</h3>
            </div>
            <div class="panel-body">

                @Html.ListBox("disponiveis", new MultiSelectList(Model,"Registro","Rotulo_subserie"))
                @*<table class="table table-striped table-hover ">
                    @foreach (LAB5GED.DOMAIN.Entidades.Subserie _grp in Model)
                    {
                        <tr>
                            <td>@_grp.Id_subserie - @_grp.Rotulo_subserie</td>
                            <td>@Html.ActionLink("Adicionar esta Subsérie", "ConfigurarSubseries", new { _registroUsuario = _usuario.Registro, _registroSubserie = @_grp.Registro, _adiciona = true })</td>
                        
                        </tr>

                    }
                </table>*@
                <input type="button"  value=">>>" onclick="addItem();" />
            </div>
        </div>
    </div>


    <div class="col-lg-6">

        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Subséries vinculadas ao usuário</h3>
            </div>
            <div class="panel-body">

                <input type="button" value="<<<" onclick="remItem();" />

                @Html.ListBox("vinculadas", new MultiSelectList(_usuario.Subseries, "Registro", "Rotulo_subserie"))
                @*<table class="table table-striped table-hover ">
                    @foreach (LAB5GED.DOMAIN.Entidades.Subserie _grp in _usuario.Subseries)
                    {
                        <tr>
                            <td>@_grp.Id_subserie - @_grp.Rotulo_subserie</td>
                            <td>@Html.ActionLink("Remover esta Subsérie", "ConfigurarSubseries", new { _registroUsuario = _usuario.Registro, _registroSubserie = @_grp.Registro, _adiciona = false })</td>
                        </tr>

                    }
                </table>*@
            </div>
        </div>
    </div>

</div>